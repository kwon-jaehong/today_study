검색 시스템이란?
예를 들어 구글 검색을 이라 하믄 <br>
검색엔진, 검색 시스템, 검색 서비스 등 부르는 호칭이 다양하다

검색 엔진 : 광활한 웹에서 정보를 수집해 검색 결과를 제공하는 프로그램이다.

검색 시스템 : 대용량 데이터를 기반으로 신뢰성 있는 검색 결과를 제공하기 위해 검색엔진을 기반으로 구축된 시스템을 통칭하는 용어

검색 서비스 : 검색 엔진을 기반으로 구축한 검색 시스템을 활용해 검색 결과를 서비스로 제공한다.

즉, 검색 서비스 > 검색 시스템 > 검색엔진 이다.


엘라스틱서치는 `검색 엔진`이다.

엘라스틱 서치는 루씬(자바 라이브러리) 기반의 오픈소스 검색 엔진
동적 스키마 생성

https://esbook.kimjmin.net/03-cluster/3.2-index-and-shards


docker run -p 9200:9200 -p 9300:9300 -e "discovery.type=single-node" docker.elastic.co/elasticsearch/elasticsearch:7.15.0

----


검색 시스템의 구성 요소
- 정보를 수집하는 수집기
- 수집한 데이터를 저장하는 스토리지
- 수집한 데이터를 검색에 적절한 형태로 변환하는 색인기
- 색인된 데이터에서 일치하는 문서를 찾는 검색기로 구성된다.


수집기는 웹사이트, 카페, 블로그 등 정보를 수집하는 프로그램이다. 크롤러, 스파이더, 웜, 웹 로봇 등르 ㅗ불린다.

스토리지는 걍 DB

색인기는 다양한 형태소 분석기를 조합해 정보에서 의미가 있는 용어를 추출하고 검색에 유리한 역색인 구조로 데이터를 저장한다.

검색기는 질의와 문서가 일치하는지는 유사도 기반의 검색 순위 알고리즘으로 판단한다. 검색기도 색인기와 마찬가지로 형태소 분석기를 이요ㅕㅇ해 사용자 질의에서 유의미한 용어를 추출해 검색한다. `따라서 사용하는 형태소 분석기에 따라 검색 품질이 달라진다.`



-----------

관계형 데이터베이스와 차이점
검색엔진을 설명할때, 항상 비교되는 것이 RDBMS다. 두가지 모두 질의와 일치하는 데이터를 찾아 사용자에게 제공한다는 점에서 유사점이 많다.
하지만 RDB 혼자 검색 기능을 제공하는데 문제점이 있다. SQL문을 이용해 원하는 정보의 검색이 가능한데, 텍스트 매칭을 통한 단순한 검색만 가능하다. 텍스트를 여러단어로 변형하거나 여러 개의 동의어나 유의어를 활용한 검색은 불가능 하다.
(26페이지 명칭 캡쳐)


RDBMS와 엘라스틱서치는 인덱스라는 개념을 다르게 사용한다.
RDBMS에서 인덱스는 where절의 쿼리와 join을 빠르게 만드는 보조 데이터 도구로 사용된다.

엘라스틱 서치는 기본적으로 http를 통해 json형식의 restful api를 이용한다.



엘라스틱 서버정보는 다음과 같은 명령어로 알 수 있다.
curl -XGET http://localhost:9200

엘라스틱 서치는 대소문자를 명확하게 안해도 검색이 가능하다! (RDBMS는 대소문자 구분이 철저하다)
또한 엘라스틱 서치는 구조화되지않은 비정형 데이터도 검색이 가능해진다는 점이다. 구조화되지않은 데이터까지 스스로 분석해 자동으로 필드를 생성하고 저장한다.
엘라스틱 서치는 Nosql이다.
엘라스틱서치는 몽고DB나 postgresql과 비교하면, 좀 더 고차원적인 전문 검색(full text)가 가능하다. 





---------------------
엘라스틱서치 단점

실시간이 아니다, 일반적으로 색인된 데이터는 통상적으로 1초 뒤에나 검색이 가능해 진다. 색인된 데이터는 내부적으로 커밋과 플러시 같은 복잡한 과정을 거치기 때문에 실시간이 아니다. 엄밀히 따지자면 준 실시간이라고 할 수 있다.

둘째, 트랜잭션과 롤백 기능을 제공하지 않는다. 엘라스틱서치는 기본적으로 분산시스템으로 구성된다. 전체적인 클러스터의 성능 향상을 위해 시스템적으로 비용소모가 큰 롤백과 트랜잭션을 지원하지 않기때문에 최악의 경우, 데이터 손실 위험이 있다.

셋째, 데이터의 업데이트를 제공하지 않는다. 엄밀히 말하면 엘라스틱서치는 업데이트 명령이 요청될 경우 기존 문서를 삭제하고 변경된 내용으로 새로운 문서를 생성하는 방식을 사용한다. 이러한 이유로 단순 업데이트에 비해서는 상대적으로 많은 비용이 발생한다. 하지만 이건 단점이 아니라 이를 통해 불변적인 이점을 취할 수 있다.


-------------------

https://www.youtube.com/watch?v=iNvYsGKelYs

DB 에서 인덱스란?

쿼리를 빠르게 찾기위한 장치
단점 테이블 컬럼을 복사해서 미리 정렬해놓음 (b+트리)

-------------


|엘라스틱 서치| RDBMS |
|:---:|:---:|
|인덱스|database|
|매핑|스키마|
|다큐먼트 문서|row|


엘라스틱서치에서 인덱스란?
> RDBMS에서 database와 같은 요소다
> 문서를 저장되는 논리적인 공간 (문서를 저장하기 위해서는 반드시 인덱스가 존재해야된다)
> 인덱스를 설계하는 것이 엘라스틱서치를 사용하기 위해 고려해야되는 첫단계이다.


엘라스틱서치에서 샤드란?
> RDBMS에서 파티션과 비슷한 원리
> 인덱스에 색인되는 문서가 저장되는 공간
> 하나의 인덱스는 반드시 하나 이상의 샤드를 가진다
> 인덱스를 만들때 최초로 설정해야되며, 중간에 못바꾼다


엘라스틱서치에서 매핑이란?

> RDBMS에서 스카마와 같은 요소
> 문서의 구조를 나타내는 정보
> 엘라스틱 서치는 스키마리스가 아니라, 미리 정의를 하지 않아도 되는것뿐이다.
> 동적 매핑 : 처음 색인되는 문서를 바탕으로 매핑정보를 자동으로 생성


엘라스틱 서치에서 색인(indexing)이란 무엇인가?
> 문서를 분석하고 저장하는 과정을 색인이라고 정의합니다.


엘라스틱서치에서 검색 과정
검색어 분석 > 역색인 검색 (inverted index) > 검색 결과 표시

역색인이란? -> 문자열을 분석한 결과를 저장하고 있는 구조체
-> 인프런 엘라스틱에센셜 7강 1분 40초 그림 참조
